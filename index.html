<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poker Range Visualizer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        html {
            height: 100%;
        }

        .upload-container, .legend-container, .info-container, .menu-container {
            background: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
            max-width: 600px;
            margin: 0;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
            position: fixed;
            z-index: 1000;
            min-height: 200px;
        }

        .upload-container {
            top: 20px;
            left: 20px;
        }

        .legend-container {
            top: 20px;
            right: 20px;
            min-width: 300px;
        }

        .info-container {
            bottom: 20px;
            right: 20px;
        }

        .menu-container.fixed {
            left: 20px;
            width: 300px;
        }

        .hidden {
            display: none;
        }

        .upload-icon, .legend-icon, .info-icon, .menu-icon {
            position: fixed;
            background-color: #fff;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 1000;
        }

        .upload-icon {
            top: 20px;
            left: 20px;
        }

        .legend-icon {
            top: 20px;
            right: 20px;
        }

        .info-icon {
            bottom: 20px;
            right: 20px;
        }

        .menu-icon {
            left: 20px;
        }

        .upload-container h2, .legend-container h2, .info-container h2, .menu-container h2 {
            font-size: 24px;
            margin-bottom: 15px;
            color: #102a43;
            text-align: center;
            font-weight: bold;
        }

        .upload-container input[type="file"] {
            padding: 20px;
            border: 2px dashed #bcccdc;
            border-radius: 12px;
            margin-bottom: 15px;
            cursor: pointer;
            text-align: center;
            background-color: #f0f4f8;
            transition: background-color 0.3s ease, border 0.3s ease;
            font-size: 16px;
            color: #627d98;
        }

        .upload-container input[type="file"]:hover {
            background-color: #e0e6ed;
            border-color: #9fb3c8;
        }

        .upload-container button, .legend-container button, .info-container button, .menu-container button {
            background-color: #2f80ed;
            color: white;
            border: none;
            padding: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            border-radius: 12px;
            transition: background-color 0.3s ease, transform 0.3s ease;
            font-size: 16px;
            font-weight: bold;
        }

        .upload-container button:hover, .legend-container button:hover, .info-container button:hover, .menu-container button:hover {
            background-color: #1c64d1;
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .upload-container label {
            font-size: 16px;
            margin-bottom: 10px;
            color: #334e68;
            font-weight: 500;
        }

        .upload-container input[type="number"] {
            padding: 12px;
            border: 1px solid #bcccdc;
            border-radius: 8px;
            width: 120px;
            margin-bottom: 15px;
            font-size: 16px;
            color: #334e68;
        }

        .close-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 18px;
            color: #333;
        }

    .main-container {
        display: flex;
        flex-direction: row;
        position: relative;
        top: 80px;
        transition: top 0.3s ease, margin-left 0.3s ease, width 0.3s ease;
        margin-left: 350px;
        width: calc(100% - 350px);
    }

    .range-image {
        margin-bottom: 0px;
        transition: width 0.3s ease;
    }

    .range-image canvas {
        width: 100%;
        height: auto;
    }

    .images-container {
        display: grid;
        width: 100%;
        overflow-y: auto;
    }
        .category {
            cursor: pointer;
            margin: 5px 0;
            background-color: #007bff;
            color: #fff;
            padding: 10px;
            border-radius: 5px;
            transition: all 0.3s ease;
            display: block;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        .category:hover {
            background-color: #0056b3;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .subcategory {
            margin-top: 5px;
            display: none;
            padding-left: 20px;
        }

        .tab {
            cursor: pointer;
            margin: 5px 0;
            background-color: #6c757d;
            color: #fff;
            padding: 10px;
            border-radius: 5px;
            transition: all 0.3s ease;
            display: block;
            margin-left: 40px;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        .tab:hover {
            background-color: #5a6268;
        }

        .category i {
            margin-right: 10px;
            transition: transform 0.3s ease;
        }

        .expanded i {
            transform: rotate(90deg);
        }

        .selected {
            background-color: #28a745;
            color: #fff;
        }

        #columns-selector {
            margin-bottom: 15px;
        }

        .menu-container, .category, .subcategory, .tab {
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        .subcategory .category:hover {
            background-color: #0056b3;
        }

        .zoom-controls {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        .zoom-slider {
            width: 100%;
            margin-top: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="upload-icon" id="upload-icon" onclick="toggleUploadContainer()">
        <i class="fas fa-upload"></i>
    </div>

    <div class="upload-container" id="upload-container">
        <button class="close-button" onclick="toggleUploadContainer()">
            <i class="fas fa-times"></i>
        </button>
        <h2>Upload Range Manager File</h2>
        <input type="file" id="fileInput" accept=".rm" />
        <button onclick="handleFileUpload()"><i class="fas fa-file-upload"></i> Afficher</button>
        <div id="columns-selector">
            <label for="numColumns">Nombre de Colonnes: </label>
            <input type="number" id="numColumns" value="4" min="1" max="8" onchange="updateImageLayout()">
        </div>
        <button onclick="clearImages()"><i class="fas fa-trash-alt"></i> Effacer les Images</button>
        <input type="range" id="zoomSlider" class="zoom-slider" min="0.2" max="4" step="0.1" value="1" oninput="updateZoom()">
        <label for="zoomSlider">Zoom: <span id="zoomValue">1</span>x</label>
    </div>

    <div class="legend-icon" id="legend-icon" onclick="toggleLegendContainer()">
        <i class="fas fa-list-alt"></i>
    </div>

    <div class="legend-container hidden" id="legend-container">
        <button class="close-button" onclick="toggleLegendContainer()">
            <i class="fas fa-times"></i>
        </button>
        <h2>Légendes des Actions</h2>
        <div id="legend-content"></div>
    </div>

    <div class="info-icon hidden" id="info-icon" onclick="toggleInfoContainer()">
        <i class="fas fa-info-circle"></i>
    </div>

    <div class="info-container" id="info-container">
        <button class="close-button" onclick="toggleInfoContainer()">
            <i class="fas fa-times"></i>
        </button>
        <h2>Informations</h2>
        <p>Le <b>Poker Range Visualizer</b> est une application web qui vous permet de charger et de visualiser des ranges exportées depuis <a href="https://range-manager.com/" target="_blank"><b>Range Manager</b></a>. Vous pouvez naviguer dans les catégories et les ranges via le menu latéral, afficher ou masquer les images correspondantes, ajuster le zoom sur les images, et personnaliser l'affichage en modifiant le nombre de colonnes. Les panneaux de contrôle et de menu peuvent être réduits pour optimiser l'espace, et une légende vous aide à comprendre les actions représentées par les couleurs.</p>
        <p>Vos ranges sont traitées en local par votre navigateur et resteront privées</p>
        <p>L'auteur de cette page n'a aucun lien avec Range Manager, ni ne perçoit de rémunération mais vous encourage à soutenir l'auteur de Range Manager, n'hésitez pas à <a href="https://range-manager.com/buy/" target="_blank"><strong>Acheter une licence</strong></a>.</p>
    </div>

    <div class="menu-icon hidden" id="menu-icon" onclick="toggleMenuContainer()" style="top: calc(20px + 20px + 20px + 200px);">
        <i class="fas fa-bars"></i>
    </div>

    <div class="menu-container fixed" id="menu-container" style="top: calc(20px + 20px + 20px + 200px);">
        <button class="close-button" onclick="toggleMenuContainer()">
            <i class="fas fa-times"></i>
        </button>
        <h2>Menu</h2>
        <div class="menu-content" id="menu-content">
            <!-- Le contenu du menu sera généré ici -->
        </div>
    </div>

    <div class="main-container" id="main-container" style="margin-left: 350px;">
        <div class="images-container" id="images-container"></div>
    </div>

<script>
    window.addEventListener('load', function() {
        adjustContainerPositions();
        adjustImageContainerHeight();
    });

    window.addEventListener('resize', function() {
        adjustContainerPositions();
        adjustImageContainerHeight();
    });

    function adjustContainerPositions() {
        const uploadContainer = document.getElementById('upload-container');
        const menuContainer = document.getElementById('menu-container');
        const menuIcon = document.getElementById('menu-icon');
        const mainContainer = document.getElementById('main-container');
        const offset = uploadContainer.classList.contains('hidden') ? 80 : uploadContainer.offsetHeight + 40;

        mainContainer.style.top = `${offset}px`;
        menuContainer.style.top = `${offset}px`;
        menuIcon.style.top = `${offset}px`;
    }

    let zoomLevel = 1;
    let rangesData = null;

        function handleFileUpload() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];
            if (!file) {
                alert('Please select a file to upload.');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(event) {
                const fileContent = event.target.result;
                try {
                    const rangesData = JSON.parse(fileContent);
                    displayCategorySelection(rangesData);
                    updateLegend(rangesData);
                    document.querySelector('.legend-container').classList.remove('hidden');
                    document.querySelector('.legend-icon').classList.add('hidden');
                } catch (error) {
                    alert('Invalid JSON format. Please upload a valid file.');
                }
            };
            reader.readAsText(file);
        }

        function toggleUploadContainer() {
            const uploadContainer = document.getElementById('upload-container');
            const uploadIcon = document.getElementById('upload-icon');
            const mainContainer = document.getElementById('main-container');
            const menuContainer = document.getElementById('menu-container');
            const menuIcon = document.getElementById('menu-icon');
            if (uploadContainer.classList.contains('hidden')) {
                uploadContainer.classList.remove('hidden');
                uploadIcon.classList.add('hidden');
                mainContainer.style.top = `${uploadContainer.offsetHeight + 40}px`;
                menuContainer.style.top = `${uploadContainer.offsetHeight + 80}px`;
                menuIcon.style.top = `${uploadContainer.offsetHeight + 80}px`;
                adjustImageContainerHeight();
            } else {
                uploadContainer.classList.add('hidden');
                uploadIcon.classList.remove('hidden');
                mainContainer.style.top = '80px';
                menuContainer.style.top = '100px';
                menuIcon.style.top = '100px';
                adjustImageContainerHeight();
            }
        }

        function toggleLegendContainer() {
            const legendContainer = document.getElementById('legend-container');
            const legendIcon = document.getElementById('legend-icon');
            if (legendContainer.classList.contains('hidden')) {
                legendContainer.classList.remove('hidden');
                legendIcon.classList.add('hidden');
                updateLegend(window.rangesData);
            } else {
                legendContainer.classList.add('hidden');
                legendIcon.classList.remove('hidden');
            }
        }

        function toggleInfoContainer() {
            const infoContainer = document.getElementById('info-container');
            const infoIcon = document.getElementById('info-icon');
            if (infoContainer.classList.contains('hidden')) {
                infoContainer.classList.remove('hidden');
                infoIcon.classList.add('hidden');
            } else {
                infoContainer.classList.add('hidden');
                infoIcon.classList.remove('hidden');
            }
            adjustImageContainerHeight();
        }

    function toggleMenuContainer() {
        const menuContainer = document.getElementById('menu-container');
        const menuIcon = document.getElementById('menu-icon');
        const mainContainer = document.getElementById('main-container');
        if (menuContainer.classList.contains('hidden')) {
            menuContainer.classList.remove('hidden');
            menuIcon.classList.add('hidden');
            mainContainer.style.marginLeft = '350px';
            mainContainer.style.width = 'calc(100% - 350px)';
        } else {
            menuContainer.classList.add('hidden');
            menuIcon.classList.remove('hidden');
            mainContainer.style.marginLeft = '80px';
            mainContainer.style.width = 'calc(100% - 80px)';
        }
        adjustImageContainerHeight();
    }


        function displayCategorySelection(rangesData) {
            const menuContent = document.getElementById('menu-content');
            menuContent.innerHTML = '';
            window.rangesData = rangesData;

            const categories = rangesData.categories;
            if (!categories) {
                menuContent.innerHTML = '<p>Aucune catégorie trouvée dans le fichier.</p>';
                return;
            }

            function createCategoryElement(categoryId, parentPath) {
                const category = categories[categoryId];
                if (!category) return null;

                const newPath = parentPath ? parentPath + ' > ' + category.name : category.name;

                const categoryElement = document.createElement('div');
                categoryElement.className = 'category';
                categoryElement.innerHTML = `<i class="fas fa-angle-right"></i>${category.name}`;
                categoryElement.onclick = function(event) {
                    event.stopPropagation();

                    const subcategoryElement = categoryElement.querySelector('.subcategory');
                    if (subcategoryElement) {
                        const isExpanded = subcategoryElement.style.display === 'block';
                        if (!isExpanded) {
                            subcategoryElement.style.display = 'block';
                            categoryElement.classList.add('expanded');
                            const icon = categoryElement.querySelector('i');
                            if (icon) {
                                icon.className = 'fas fa-angle-down';
                            }
                            scrollToCategory(categoryElement);
                        } else {
                            subcategoryElement.style.display = 'none';
                            categoryElement.classList.remove('expanded');
                            const icon = categoryElement.querySelector('i');
                            if (icon) {
                                icon.className = 'fas fa-angle-right';
                            }
                        }
                    }
                    // Adjust menu container scroll after expanding/collapsing
                    adjustMenuScroll();
                };

                if (category.children) {
                    const subcategoryElement = createSubcategoryElement(category, newPath, category.children, false);
                    if (subcategoryElement) {
                        categoryElement.appendChild(subcategoryElement);
                    }
                } else if (category.tabList) {
                    const subcategoryElement = createSubcategoryElement(category, newPath, category.tabList, true);
                    if (subcategoryElement) {
                        categoryElement.appendChild(subcategoryElement);
                    }
                }

                return categoryElement;
            }

            function createSubcategoryElement(category, newPath, items, isTabList) {
                const subcategoryElement = document.createElement('div');
                subcategoryElement.className = 'subcategory';
                subcategoryElement.style.display = 'none';

                items.forEach(id => {
                    if (isTabList) {
                        if (category.tabs && category.tabs[id]) {
                            const tab = category.tabs[id];
                            const tabElement = document.createElement('div');
                            tabElement.className = 'tab';
                            tabElement.textContent = tab.name;
                            tabElement.dataset.fullName = newPath + ' > ' + tab.name;
                            tabElement.onclick = function(event) {
                                event.stopPropagation();
                                toggleRangeImage(tab, newPath + ' > ' + tab.name, rangesData);
                            };
                            subcategoryElement.appendChild(tabElement);
                        }
                    } else {
                        const childCategoryElement = createCategoryElement(id, newPath);
                        if (childCategoryElement) {
                            subcategoryElement.appendChild(childCategoryElement);
                        }
                    }
                });

                return subcategoryElement;
            }

            if (categories.root && categories.root.children) {
                categories.root.children.forEach(childId => {
                    const rootCategoryElement = createCategoryElement(childId, '');
                    if (rootCategoryElement) {
                        menuContent.appendChild(rootCategoryElement);
                    }
                });
            } else {
                menuContent.innerHTML = '<p>Aucune catégorie racine trouvée.</p>';
            }
        }

        function adjustMenuScroll() {
            const menuContainer = document.getElementById('menu-container');
            menuContainer.style.overflowY = 'auto';
            menuContainer.style.maxHeight = `${window.innerHeight - menuContainer.getBoundingClientRect().top - 20}px`;
        }

        function scrollToCategory(categoryElement) {
            const menuContainer = document.getElementById('menu-container');
            const categoryOffsetTop = categoryElement.offsetTop;
            menuContainer.scrollTop = categoryOffsetTop - menuContainer.offsetTop;
        }

        function toggleRangeImage(tab, tabFullName, rangesData) {
            const imagesContainer = document.getElementById('images-container');
            const existingImage = [...imagesContainer.children].find(child => child.dataset.fullName === tabFullName);

            const tabElements = document.querySelectorAll('.tab');
            let tabElement = null;
            tabElements.forEach(element => {
                if (element.dataset.fullName === tabFullName) {
                    tabElement = element;
                }
            });

            if (existingImage) {
                imagesContainer.removeChild(existingImage);
                if (tabElement) tabElement.classList.remove('selected');
                return;
            }

            const combinedHands = {};

            if (Array.isArray(tab.rangeList)) {
                tab.rangeList.forEach(range => {
                    if (range && rangesData.ranges[range.id]) {
                        const rangeData = rangesData.ranges[range.id];
                        const color = rangeData.color;
                        const type = rangeData.type;

                        if (Array.isArray(range.hands)) {
                            range.hands.forEach(hand => {
                                const [handName, ratio] = hand.split(':');
                                const ratioValue = ratio ? parseFloat(ratio) : 1.0;
                                if (!combinedHands[handName]) {
                                    combinedHands[handName] = [];
                                }
                                combinedHands[handName].push({ color, type, ratio: ratioValue });
                            });
                        }
                    }
                });
            } else {
                console.error('tab.rangeList is not defined or not an array:', tab.rangeList);
                alert('No ranges found for this tab.');
                return;
            }

            generateRangeImage(combinedHands, tabFullName);
            if (tabElement) tabElement.classList.add('selected');
        }

function generateRangeImage(handsWithColors, rangeName) {
    const canvas = document.createElement('canvas');
    canvas.width = 1200;
    canvas.height = 1200;
    const ctx = canvas.getContext('2d', { willReadFrequently: true });

    const gridSize = 90; // Taille de la grille ajustée
    const labels = ['A', 'K', 'Q', 'J', 'T', '9', '8', '7', '6', '5', '4', '3', '2'];

    ctx.fillStyle = '#fff';
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = '#000';
    ctx.font = '42px Arial'; // Taille de police ajustée

    // Offsets pour les labels
    const labelOffsetX = gridSize / 2 - 15;
    const labelOffsetY = 30;

    // Dessiner les labels des colonnes
    for (let i = 0; i < 13; i++) {
        ctx.fillText(labels[i], i * gridSize + labelOffsetX, labelOffsetY);
    }

    // Dessiner les labels des lignes
    for (let i = 0; i < 13; i++) {
        ctx.fillText(labels[i], 10, i * gridSize + gridSize / 2 + 15);
    }

    // Dessiner les rectangles des mains
    for (let row = 0; row < 13; row++) {
        for (let col = 0; col < 13; col++) {
            let rank1 = labels[row];
            let rank2 = labels[col];
            let displayHand;
            let isSuited = row < col;

            if (row === col) {
                displayHand = rank1 + rank2;
            } else if (isSuited) {
                displayHand = rank1 + rank2 + 's';
            } else {
                displayHand = rank2 + rank1 + 'o';
            }

            // Déterminer la couleur du rectangle
            if (handsWithColors[displayHand]) {
                const handDetails = handsWithColors[displayHand];

                if (handDetails.length === 1) {
                    const { color, type, ratio } = handDetails[0];
                    if (type === 'color') {
                        ctx.fillStyle = color;
                        ctx.fillRect(col * gridSize + 1, row * gridSize + 1, gridSize - 2, gridSize - 2);
                    }
                } else {
                    let startX = col * gridSize + 1;
                    handDetails.forEach(({ color, type, ratio }) => {
                        if (type === 'color') {
                            const width = (gridSize - 2) * ratio;
                            ctx.fillStyle = color;
                            ctx.fillRect(startX, row * gridSize + 1, width, gridSize - 2);
                            startX += width;
                        }
                    });
                }

                // Dessiner la bordure si nécessaire
                handDetails.forEach(({ color, type }) => {
                    if (type === 'border') {
                        ctx.strokeStyle = color;
                        ctx.lineWidth = 4; // Épaisseur de bordure ajustée
                        ctx.strokeRect(col * gridSize + 3, row * gridSize + 3, gridSize - 6, gridSize - 6);
                    }
                });
            } else {
                ctx.fillStyle = '#ccc';
                ctx.fillRect(col * gridSize + 1, row * gridSize + 1, gridSize - 2, gridSize - 2);
            }

            // Dessiner le texte de la main
            ctx.fillStyle = '#000';
            ctx.font = 'bold 35px Arial'; // Taille de police pour les mains
            const textWidth = ctx.measureText(displayHand).width;
            ctx.fillText(displayHand, col * gridSize + (gridSize - textWidth) / 2, row * gridSize + gridSize / 2 + 15);
        }
    }

    // Dessiner les lignes de la grille après les rectangles
    ctx.strokeStyle = '#000';
    ctx.lineWidth = 2;
    for (let i = 0; i <= 13; i++) {
        ctx.beginPath();
        ctx.moveTo(i * gridSize + 0.5, 0);
        ctx.lineTo(i * gridSize + 0.5, gridSize * 13);
        ctx.stroke();

        ctx.beginPath();
        ctx.moveTo(0, i * gridSize + 0.5);
        ctx.lineTo(gridSize * 13, i * gridSize + 0.5);
        ctx.stroke();
    }

    const imagesContainer = document.getElementById('images-container');
    const rangeImage = document.createElement('div');
    rangeImage.classList.add('range-image');
    rangeImage.dataset.fullName = rangeName;
    rangeImage.innerHTML = `<h3>${rangeName}</h3>`;
    rangeImage.appendChild(canvas);

    const baseImageWidth = 350; // Conserver le redimensionnement à la fin
    const imageWidth = baseImageWidth * zoomLevel;
    rangeImage.style.width = `${imageWidth}px`;

    imagesContainer.appendChild(rangeImage);

    updateImageLayout();
}



        function updateLegend(rangesData) {
            const legendContent = document.getElementById('legend-content');
            legendContent.innerHTML = '';

            const ranges = rangesData.ranges;
            if (ranges) {
                Object.keys(ranges).forEach(rangeId => {
                    const range = ranges[rangeId];
                    if (range.color && range.name) {
                        const legendItem = document.createElement('div');
                        legendItem.className = 'legend-item';
                        legendItem.innerHTML = `
                            <div class="legend-color" style="${range.type === 'border' ? 'border: 5px solid ' + range.color + '; width: 15px; height: 15px;' : 'background-color: ' + range.color};"></div>
                            <span>${range.name}</span>
                        `;
                        legendContent.appendChild(legendItem);
                    }
                });
            }

            document.querySelector('.legend-icon').classList.add('hidden');
        }

function updateImageLayout() {
    adjustImageContainerHeight();
    const imagesContainer = document.getElementById('images-container');
    const numColumns = parseInt(document.getElementById('numColumns').value, 10);
    const gap = 10; // Fixer un espacement constant entre les images

    const baseImageWidth = 350; // Largeur de base de l'image
    const imageWidth = baseImageWidth * zoomLevel;

    // Calculer la largeur totale disponible pour les images
    const containerWidth = imagesContainer.clientWidth;

    // Ajuster le nombre de colonnes en fonction de l'espace disponible
    let adjustedNumColumns = numColumns;
    while (adjustedNumColumns > 1 && (adjustedNumColumns * imageWidth + (adjustedNumColumns - 1) * gap) > containerWidth) {
        adjustedNumColumns--;
    }

    imagesContainer.style.display = 'grid';
    imagesContainer.style.gridTemplateColumns = `repeat(${adjustedNumColumns}, ${imageWidth}px)`;
    imagesContainer.style.gap = `${gap}px`;
}


    function updateZoom() {
        const zoomSlider = document.getElementById('zoomSlider');
        zoomLevel = parseFloat(zoomSlider.value);
        document.getElementById('zoomValue').innerText = zoomLevel.toFixed(1);

        const baseImageWidth = 350; // Base width of image
        const imageWidth = baseImageWidth * zoomLevel;

        const rangeImages = document.querySelectorAll('.range-image');
        rangeImages.forEach(rangeImage => {
            rangeImage.style.width = `${imageWidth}px`;
        });

        updateImageLayout();
    }

        function clearImages() {
            const imagesContainer = document.getElementById('images-container');
            imagesContainer.innerHTML = '';

            const tabElements = document.querySelectorAll('.tab.selected');
            tabElements.forEach(tab => tab.classList.remove('selected'));
        }
function adjustImageContainerHeight() {
    const imagesContainer = document.getElementById('images-container');
    const uploadContainer = document.getElementById('upload-container');
    const availableHeight = window.innerHeight - uploadContainer.offsetHeight - 120; // Ajustement pour laisser un peu de marge
    imagesContainer.style.height = `${availableHeight}px`;
    imagesContainer.style.overflowY = 'auto'; // Permettre le défilement vertical si nécessaire
}
    </script>
</body>
</html>
